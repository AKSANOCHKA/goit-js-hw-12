{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n// API конфігурація\nconst API_KEY = '19753267-9cf01e6822d74b7ae8fe04f3f';\nconst BASE_URL = 'https://pixabay.com/api/';\n\n// Конфігурація axios\nconst pixabayAPI = axios.create({\n  baseURL: BASE_URL,\n  params: {\n    key: API_KEY,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 15, // 15 зображень на сторінку\n  },\n});\n\n/**\n * Отримання зображень за пошуковим запитом з пагінацією\n * @param {string} query - Пошукове слово\n * @param {number} page - Номер сторінки\n * @returns {Promise} - Promise з даними від API\n */\nexport async function getImagesByQuery(query, page = 1) {\n  try {\n    const response = await pixabayAPI.get('', {\n      params: {\n        q: query.trim(),\n        page: page,\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n// Елементи DOM\nconst galleryContainer = document.querySelector('.gallery');\nconst loaderContainer = document.querySelector('.loader-container');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst loadMoreContainer = document.querySelector('.load-more-container');\n\n// Екземпляр SimpleLightbox\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n/**\n * Створення розмітки для галереї зображень\n * @param {Array} images - Масив об'єктів зображень\n */\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img \n            class=\"gallery-image\" \n            src=\"${webformatURL}\" \n            alt=\"${tags}\" \n            loading=\"lazy\" \n          />\n          <div class=\"info\">\n            <p class=\"info-item\">\n              <b>Likes</b>\n              <span>${likes}</span>\n            </p>\n            <p class=\"info-item\">\n              <b>Views</b>\n              <span>${views}</span>\n            </p>\n            <p class=\"info-item\">\n              <b>Comments</b>\n              <span>${comments}</span>\n            </p>\n            <p class=\"info-item\">\n              <b>Downloads</b>\n              <span>${downloads}</span>\n            </p>\n          </div>\n        </a>\n      </li>\n    `\n    )\n    .join('');\n\n  galleryContainer.insertAdjacentHTML('beforeend', markup);\n\n  // Оновлення SimpleLightbox після додавання нових елементів\n  lightbox.refresh();\n}\n\n/**\n * Очищення вмісту галереї\n */\nexport function clearGallery() {\n  galleryContainer.innerHTML = '';\n}\n\n/**\n * Показати індикатор завантаження\n */\nexport function showLoader() {\n  loaderContainer.classList.add('visible');\n}\n\n/**\n * Сховати індикатор завантаження\n */\nexport function hideLoader() {\n  loaderContainer.classList.remove('visible');\n}\n\n/**\n * Показати кнопку Load More\n */\nexport function showLoadMoreButton() {\n  loadMoreContainer.classList.add('visible');\n}\n\n/**\n * Сховати кнопку Load More\n */\nexport function hideLoadMoreButton() {\n  loadMoreContainer.classList.remove('visible');\n}\n\n/**\n * Отримати висоту карточки галереї для прокручування\n * @returns {number} - Висота карточки\n */\nexport function getCardHeight() {\n  const card = galleryContainer.querySelector('.gallery-item');\n  if (card) {\n    return card.getBoundingClientRect().height;\n  }\n  return 0;\n}\n\n// Експорт кнопки для додавання обробника подій\nexport { loadMoreBtn };\n","import { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  getCardHeight,\n  loadMoreBtn,\n} from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Глобальні змінні\nlet currentQuery = '';\nlet currentPage = 1;\nlet totalHits = 0;\nlet loadedImages = 0;\n\n// Елементи DOM\nconst searchForm = document.querySelector('.form');\nconst searchInput = document.querySelector('input[name=\"search-text\"]');\n\n// Обробники подій\nsearchForm.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMoreClick);\n\n/**\n * Обробник відправки форми пошуку\n * @param {Event} event - Подія відправки форми\n */\nasync function onSearchFormSubmit(event) {\n  event.preventDefault();\n\n  const query = searchInput.value.trim();\n\n  // Перевірка на порожній рядок\n  if (!query) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search query!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  // Скидання параметрів для нового пошуку\n  currentQuery = query;\n  currentPage = 1;\n  loadedImages = 0;\n\n  // Очищення попередніх результатів\n  clearGallery();\n  hideLoadMoreButton();\n\n  await searchImages();\n\n  // Очищення поля вводу\n  searchInput.value = '';\n}\n\n/**\n * Обробник кліку по кнопці Load More\n */\nasync function onLoadMoreClick() {\n  currentPage += 1;\n  await searchImages();\n}\n\n/**\n * Основна функція пошуку зображень\n */\nasync function searchImages() {\n  try {\n    // Показуємо лоадер\n    showLoader();\n\n    // Виконуємо запит до API\n    const data = await getImagesByQuery(currentQuery, currentPage);\n\n    // Ховаємо лоадер\n    hideLoader();\n\n    // Перевірка першого запиту\n    if (currentPage === 1) {\n      totalHits = data.totalHits;\n\n      if (data.hits.length === 0) {\n        iziToast.error({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n        });\n        return;\n      }\n\n      // Показуємо успішне повідомлення для першого запиту\n      iziToast.success({\n        title: 'Success',\n        message: `Hooray! We found ${totalHits} images!`,\n        position: 'topRight',\n      });\n    }\n\n    // Відображаємо галерею\n    createGallery(data.hits);\n    loadedImages += data.hits.length;\n\n    // Перевірка чи досягнуто кінця колекції\n    if (loadedImages >= totalHits) {\n      hideLoadMoreButton();\n\n      if (totalHits > 15) {\n        // Показуємо повідомлення тільки якщо було більше однієї сторінки\n        iziToast.info({\n          title: 'End of results',\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'topRight',\n        });\n      }\n    } else {\n      showLoadMoreButton();\n    }\n\n    // Плавне прокручування для Load More (не для першого запиту)\n    if (currentPage > 1) {\n      smoothScroll();\n    }\n  } catch (error) {\n    // Ховаємо лоадер в разі помилки\n    hideLoader();\n    hideLoadMoreButton();\n\n    console.error('Search error:', error);\n\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later!',\n      position: 'topRight',\n    });\n  }\n}\n\n/**\n * Плавне прокручування сторінки на дві висоти карточки\n */\nfunction smoothScroll() {\n  const cardHeight = getCardHeight();\n  const scrollDistance = cardHeight * 2;\n\n  window.scrollBy({\n    top: scrollDistance,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","BASE_URL","pixabayAPI","axios","getImagesByQuery","query","page","error","galleryContainer","loaderContainer","loadMoreBtn","loadMoreContainer","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","getCardHeight","card","currentQuery","currentPage","totalHits","loadedImages","searchForm","searchInput","onSearchFormSubmit","onLoadMoreClick","event","iziToast","searchImages","data","smoothScroll","scrollDistance"],"mappings":"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"}